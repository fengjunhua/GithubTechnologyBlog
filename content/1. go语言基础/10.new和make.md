##### new和make的区别

#### 值类型和引用类型

##### 1. 什么是值类型，什么是引用类型？为什么要定义值类型，以及为什么要定义引用类型，以及值类型和引用类型的区别？

```
主要是为了方便内存的管理，防止内存空间泄露
因为值类型再怎么定义，内存总是有限的，而引用类型有可能稍不注意就引发内存溢出。

对于值类型的变量,我们不需要为它分配内存空间,是因为系统已经默认帮我们分配好了内存空间，

对于引用类型的变量,我们不仅要声明变量,还要为它分配内存空间。

值类型和引用类型的区别
```



首先go语言的变量分为两种类型，一种是值类型，一种是引用类型。

为什么要区分值类型和引用类型呢? 



为什么要使用new和make

变量的声明过程中new和make的区别，new和make是go语言内置的两个函数，也就是说是拿来就可以使用的函数，主要用来为变量创建内存空间。



```go

值类型的变量:  
bool,int, float , string ,array,struct


引用类型的变量: 
slice切片
map
指针
interface
channel
```

类型展示：

| 类型     | 变量类型  | 零值  | 为什么是值类型,以及为什么是引用了类型的原因 |
| -------- | --------- | ----- | ------------------------------------------- |
| 值类型   | bool      | false |                                             |
|          | int       | 0     |                                             |
|          | float     | 0     |                                             |
|          | string    | ""    |                                             |
|          | array     |       |                                             |
|          | struct    | {}    |                                             |
| 引用类型 | slice     | nil   |                                             |
|          | map       | nil   |                                             |
|          | ptr指针   | nil   |                                             |
|          | channel   | nil   |                                             |
|          | interface | nil   |                                             |



#### 引用类型的声明和定义

make和new都是go语言内建的两个函数，这两个函数都是在src\builtin\builtin.go目录中定义的，new和make都是在堆上分配内存，与make不同的是，new返回的是一个指针变量，并且可以为任何类型的变量分配地址，不仅仅是引用类型，也可以是值类型，而make仅能为slice，map和channel这三种类型分配地址并进行初始化。



##### 使用new创建一个引用类型的变量

go语言官方对new函数的定义和解释，new是go语言内置的一个函数，用来为变量分配内存地址，new函数只有一个参数，这个参数是一个类型，而并不是一个具体的值，new函数的返回值是一个为该类型分配的一个零值的指针。

```go
func new(Type) *Type

new(T)为类型T类型新值分配空间并将此空间初始化为 T 的零值，返回的是新值的地址，也就是 T 类型的指针 *T，该指针指向 T 的新分配的零值，它相当于&T{}。
```



使用new声明举例：



```
1.创建一个切片

2.创建一个map

```









###### 使用make创建一个引用类型的变量

go语言对make函数的定义和解释，make函数仅仅是对slice，map，和channel这三种类型的变量进行内存分配和初始化的一个函数，make函数与new函数一样，第一个参数都是一个类型，而不是一个具体的值。make函数与new函数不同的是，new函数只有一个参数，而make函数有三个参数，make函数的第一个参数是所声明的类型名称，

make函数的返回值是一个变量，并不是一个指针，为参数分配的规格大小取决于具体的类型已经传递的参数变量。

```go
func make(t Type, size ...IntegerType) Type
函数分析:


对于slice切片类型的分配:

对于map类型的分配
```

make返回的是类型本身,
make函数是无可替代的,当我们在使用slice切片,map,channel通道的时候,必须要使用make函数来进行初始化,然后我们才可以操作。

###### 1. 声明一个slice切片

使用make函数如果初始化的是一个切片，



###### 2. 声明一个map

###### 3. 声明一个channel

```
1.创建一个切片

2.创建一个map

3. channel    channel中有可能包含一个切片或map

```







